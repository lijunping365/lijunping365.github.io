# 后台管理

## 登录相关

### 获取验证码

#### 简要描述

根据参数不同可支持获取图片验证码，短信验证码，

#### 请求 URL

- http://x.x.x.x:8080/validate/code/

#### 请求方式

- POST

#### 请求示例

```json
{
    "type": "image", 
    "deviceId": "80c71a92-a2e6-4320-3bbe-38cfd6b19ab4"
}
```

#### 请求参数

|   参数名    |  类型  | 必选 | 说明               |
| :---------: | :----: | ---- | :----------------- |
|   type    | string | 是   | 验证码类型，可选值：sms，image，scan         |
|   mobile    | string | 否   | 当 type 为 sms 的时候需要传入该字段            |
|  deviceId   |  string   | 是   | 客户端会话唯一标识 |

#### 返回示例

图片二进制流或短信验证码

#### 返回参数

图片二进制流或短信验证码

### 账号密码登录获取 Token

#### 简要描述

用户使用账号密码登录管理系统并获取 token，使用 token 便可以拿到用户信息

#### 请求 URL

- http://x.x.x.x:8080/login/account

#### 请求方式

- POST

#### 请求示例

```json
{
    "username": "admin", 
    "password": "123456", 
    "captcha": "5694", 
    "deviceId": "80c71a92-a2e6-4320-3bbe-38cfd6b19ab4"
}
```

#### 请求参数

|   参数名    |  类型  | 必选 | 说明               |
| :---------: | :----: | ---- | :----------------- |
|   username    | string | 是   | 用户的登录账号         |
|   password    | string | 是   | 用户的登录密码         |
|   captcha    | string | 是   | 图片验证码         |
|   deviceId    | string | 是   |  客户端会话唯一标识        |

#### 返回示例

```json
{
    "code": 200, 
    "msg": "成功", 
    "data": {
        "accessToken": "baoj1xit1ajymp0jzyoz0nkm08778so8", 
        "expiredTime": "1647767386251"
    }, 
    "success": true
}

```

#### 返回参数

| 参数名      | 类型   | 说明                  |
| :---------- | :----- | --------------------- |
| code     | int    | 200成功，非200失败        |
| msg      | string | 错误信息              |
| accessToken      | string | token                |
| expiredTime | string    | token过期时间戳（秒） |
| success       | boolean | 是否成功             |

### 手机号短信验证码登录获取 Token

#### 简要描述

用户使用手机号短信验证码登录管理系统并获取 token，使用 token 便可以拿到用户信息

#### 请求 URL

- http://x.x.x.x:8080/login/mobile

#### 请求方式

- POST

#### 请求示例

```json
{
    "mobile": "12345678901", 
    "captcha": "5694", 
    "deviceId": "80c71a92-a2e6-4320-3bbe-38cfd6b19ab4"
}
```

#### 请求参数

|   参数名    |  类型  | 必选 | 说明               |
| :---------: | :----: | ---- | :----------------- |
|   mobile    | string | 是   | 手机号         |
|   captcha    | string | 是   | 短信验证码         |
|  deviceId   |  string   | 是   | 客户端会话唯一标识 |

#### 返回示例

```json
{
    "code": 200, 
    "msg": "成功", 
    "data": {
        "accessToken": "baoj1xit1ajymp0jzyoz0nkm08778so8", 
        "expiredTime": "1647767386251"
    }, 
    "success": true
}

```

#### 返回参数

| 参数名      | 类型   | 说明                  |
| :---------- | :----- | --------------------- |
| code     | int    | 200成功，非200失败        |
| msg      | string | 错误信息              |
| accessToken      | string | token                |
| expiredTime | string    | token过期时间戳（秒） |
| success       | boolean | 是否成功             |